<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= destination.city %> - Details</title>
    <link rel="stylesheet" href="/stylsheets/show.css" />
  </head>
  <body>
    <main>
      <!-- Destination Title -->
      <h1><%= destination.city %>, <%= destination.country %></h1>

      <!-- City Image (Centered) -->
      <div class="city-image">
        <% if (destination.images.length) { %>
          <img src="<%= destination.images[0] %>" alt="Image of <%= destination.city %>" />
        <% } else { %>
          <p>No image available for this destination.</p>
        <% } %>
      </div>

      <!-- Description Section -->
      <section class="description">
        <h2>Description</h2>
        <p><%= destination.description %></p>
      </section>

      <!-- Points of Interest Cards -->
      <section class="points-of-interest">
        <h2>Points of Interest</h2>
        <div class="poi-cards">
          <% destination.pointsOfInterest.forEach((poi) => { %>
            <div class="poi-card">
              <h3><%= poi.name %> <%= poi.type %></h3>
              <p><%= poi.description %></p>
            </div>
          <% }) %>
        </div>
      </section>

<!-- attendees is in my note -->

  <!-- Comments Section -->
<section class="comments card">
  <h2>Comments</h2>
  <!-- Modern Comment Form -->
  <form class="modern-comment-form" action="/destinations/<%= destination._id %>/comments" method="POST">
    <div class="form-group">
      <textarea name="text" required placeholder="Add a comment..." rows="3"></textarea>
    </div>
    <button type="submit">Submit</button>
  </form>

  <% if (comments.length) { %>
    <% comments.forEach(comment => { %>
      <div class="comment">
        <p>
          <strong><%= comment.user.username %>:</strong> <%= comment.text %>
          <small>(<%= new Date(comment.createdAt).toLocaleDateString() %>)</small>
        </p>
        <% if (comment.user._id.equals(user._id)) { %>
          <!-- Edit Comment Form -->
          <form class="edit-comment-form" action="/destinations/<%= destination._id %>/comments/<%= comment._id %>?_method=PUT" method="POST">
            <textarea name="text" required><%= comment.text %></textarea>
            <button type="submit">Edit</button>
          </form>
          <!-- Delete Comment Form -->
          <form class="delete-comment-form" action="/destinations/<%= destination._id %>/comments/<%= comment._id %>?_method=DELETE" method="POST">
            <button type="submit">Delete</button>
          </form>
        <% } %>
      </div>
    <% }) %>
  <% } else { %>
    <p>No comments yet.</p>
  <% } %>

</section>

<!-- Back Button -->
<div class="back-button-container">
  <a href="/" class="back-button">Back to Destinations</a>
</div>
    </main>
  </body>
</html>
